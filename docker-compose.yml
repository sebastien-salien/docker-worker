version: "2.2"
services:
  planner:
    build:
      context: ./planner
    image: planner
    ports:
     - "3000:3000"
    networks:
      - webproxy
    depends_on: 
      - worker
    environment:
        TASKS: '8'
        WORKER: 'http://worker:8080/'
  worker:
    build:
      context: ./worker
    image: worker
    ports:
     - "8080:8080"
    networks:
      - webproxy
    environment: 
      - MULT=true
      - ADD=true
      - PORT=8080
  worker2:
    build:
      context: ./worker
    image: worker
    ports:
     - "8081:8081"
    networks:
     - webproxy
    environment: 
     - MULT=true
     - ADD=true
     - PORT=8081 
    
    
networks:
  webproxy: 
    driver: bridge